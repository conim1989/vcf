<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>{{ window_title }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles_generic.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles_app_specific.css') }}">
    <style>
        /* App-specific inline styles */
        #main-content-area { flex-grow: 1; padding-right: 15px; }
        #duplicate-selection { padding: 20px; border: 1px solid #ccc; border-radius: 8px; margin-top: 20px; }
        #duplicates-list {
            max-height: 200px;
            overflow-y: auto; /* Add scroll to this element */
            flex-grow: 1;
            margin-bottom: 15px;
            border: 1px solid #ddd;
            padding: 10px;
            --fade-amount: 8%;
            -webkit-mask-image: linear-gradient(to bottom, transparent, black var(--fade-amount), black calc(100% - var(--fade-amount)), transparent);
            mask-image: linear-gradient(to bottom, transparent, black var(--fade-amount), black calc(100% - var(--fade-amount)), transparent);
        }
        .duplicate-item { display: flex; align-items: center; padding: 5px; border-bottom: 1px solid #eee; }
        #title-manager { margin-top: 20px; }
        #filtered-titles-list { list-style: none; padding: 0; max-height: 150px; overflow-y: auto; border: 1px solid #ddd; margin-bottom: 10px; }
        #filtered-titles-list li { display: flex; justify-content: space-between; align-items: center; padding: 5px 8px; border-bottom: 1px solid #eee; }
        .delete-title-btn { cursor: pointer; color: red; font-weight: bold; border: none; background: none; font-size: 1.2em; }
    </style>
</head>
<body>
    <div class="titlebar" id="titlebar">
        <span class="titlebar-text"></span>
        <div class="window-controls">
            <button class="window-btn minimize" id="minimize-btn" title="Minimizar">–</button>
            <button class="window-btn" id="close-btn" title="Fechar">×</button>
        </div>
    </div>
    <div class="main-wrapper">
        <div class="container" id="vcf-container">
            <h1>{{ window_title }}</h1>
            <div id="duplicate-selection-1" style="display: none; color: var(--2-color); font-family:Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;">Estes contatos já estão no registro. Selecione quais você deseja reprocessar.</div> 
            <div class="button-row">
                <div class="button-container"><button type="button" id="select-all-btn" class="button">Selecionar Todos</button></div>
                <div class="button-container"><button type="button" id="select-none-btn" class="button">Selecionar Nenhum</button></div>
            </div>
            <div id="main-content-area">
                <div id="initial-form">
                    <div class="input-field">
                        <label for="vcf-path">Arquivo VCF:</label>
                        <div style="display: contents;">
                            <input type="text" id="vcf-path" class="input-style" value="{{ vcf_path }}" placeholder="Selecione um arquivo VCF para processar...">
                            <div class="button-container"><button type="button" id="browse-vcf-btn" class="button file-label">Procurar</button></div>
                        </div>
                    </div>
                    <div class="button-container"><button type="button" id="start-btn" class="button">Processar VCF</button></div>
                </div>
                <div id="duplicate-selection-2" style="display: none;">
                    <div style="display: flex;">
                        <form id="duplicates-form">
                            <div id="duplicates-list"></div>
                        </form>
                        <div class="button-container">
                            <button id="submit-button" class="button">Processar Selecionados</button>
                        </div>
                    </div>
                </div>
            </div>
            <div id="log-area" style="display: none; height: 90px;"></div>
            <div class="advanced-toggle"><a href="#" id="advanced-toggle-link">Configurações</a></div>
        </div>
        <div id="advanced-panel">
            <div id="advanced-panel-content" class="advanced-panel">
                <h3 class="h3">Configurações</h3>
                <div id="light-mode-toggle">
                    <label>
                        <input type="checkbox" id="lightModeSwitch">
                        <span class="slider"></span>
                    </label>
                    <span style="color: var(--gold-color); font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif; text-align: right;">Efeitos de Luz</span>
                </div>
                <div id="title-manager">
                    <h4 class="h4">Títulos Filtrados</h4>
                    <p style="color: var(--gold-color); font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;">Palavras nesta lista serão removidas dos nomes.</p>
                    <ul id="filtered-titles-list" style="color: var(--gold-color); font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;"></ul>
                    <div class="input-field-adv">
                        <input type="text" id="new-title-input" placeholder="Adicionar um título para filtrar..." class="input-style-adv" autofocus>
                        <div class="button-container-adv"><button type="button" id="add-title-btn" class="button-adv">+</button></div>
                    </div>
                </div>
                <hr>
                <div id="log-manager" style="margin-top: 20px;">
                    <h4 class="h4">Lista de Números Processados</h4>
                    <div id="view-log-file" class="button-container-adv">
                        <button type="button" id="view-log-btn" class="button-adv">Ver Lista</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

<script src="{{ url_for('static', filename='js_generic.js') }}"></script>
<script src="{{ url_for('static', filename='js_app_specific.js') }}"></script>
</body>
</html>
